---
import PhoneIcon from "../assets/icons/PhoneIcon.astro";
import MailIcon from "../assets/icons/Mail.astro";
import WhatsappIcon from "../assets/icons/Whatsapp.astro";
import LinkedinIcon from "../assets/icons/Linkedin.astro";
import GithubIcon from "../assets/icons/GithubIcon.astro";
import Resume from "../assets/icons/Resume.astro";

const rs = [
  {
    name: "Phone",
    icon: PhoneIcon,
    link: "tel:+50377279707",
  },
  {
    name: "Mail",
    icon: MailIcon,
    link: "mailto:edgardo.avalencia@gmail.com",
  },
  {
    name: "Whatsapp",
    icon: WhatsappIcon,
    link: "https://wa.me/+50377279707",
  },
  {
    name: "Linkedin",
    icon: LinkedinIcon,
    link: "https://www.linkedin.com/in/edgardo-valencia-1a1832292/",
  },
  {
    name: "Github",
    icon: GithubIcon,
    link: "https://github.com/Ed4n",
  },
];

const skills = [
  "React",
  "Next",
  "Astro",
  "Node",
  "Express",
  "MongoDB",
  "Figma",
  "SwiftUI",
];
---

<header
  class="bg-mirage-950 w-full h-auto lg:h-screen text-mirage-50 flex flex-col lg:flex-row gap-12 justify-between items-center p-16"
>
  <!-- Left Section -->
  <section
    class="w-full lg:w-[60%] h-full flex flex-col gap-3 justify-center items-center lg:items-start"
  >
    <div>
      <h1 class="text-7xl sm:text-9xl text-center lg:text-start">
        Edgardo <br />
        <span class="flex items-center gap-5">
          Suncin <a
            class="mt-3 transition-all hover:scale-110"
            href="/Resume.pdf"
            target="_blank"
            data-tooltip="Download Resume"
          >
            <Resume />
          </a>
        </span>
      </h1>
      <br />
      <h2 class="text-center lg:text-start text-3xl lg:text-5xl">
        Frontend Web Developer
      </h2>
    </div>

    <p class="text-xl text-center lg:text-start">
      Full stack web developer specializing in the MERN stack and UX/UI design.
    </p>

    <br />

    <!-- Icons Container -->
    <div class="flex gap-2 justify-center lg:justify-start items-center">
      {
        rs.map((item, i) => (
          <Fragment key={i}>
            <a class={`${item.name}`} href={item.link} target="_blank">
              <item.icon />
            </a>
          </Fragment>
        ))
      }
    </div>
    <br />
    <!-- Skills -->
    <div
      class="flex justify-center lg:justify-start gap-7 text-xl max-w-[500px] flex-wrap"
    >
      {skills.map((skill) => <span>{skill}</span>)}
    </div>
  </section>

  <!-- Right Section -->
  <nav class="w-full lg:w-[40%] lg:pr-12 h-full">
    <ul
      class="w-full h-full flex flex-col gap-10 lg:gap-7 justify-center items-start"
    >
      <li>
        <a href="#about">About</a>
      </li>
      <li>
        <a href="#experience">Experience</a>
      </li>
      <li>
        <a href="#projects">Projects</a>
      </li>
    </ul>
  </nav>

  <dialog data-modal>
    <b>Mail didn't open?</b>
    <br /><br />
    <div class="dialog-email">
      edgardo.avalencia@gmail.com
      <span id="copy-button">copy</span>

      <button data-close-modal>Close</button>
    </div>
  </dialog>

  <style>
    li {
      width: 100%;
      border-bottom: solid var(--mirage-50) 0.2px;
      padding-bottom: 7px;
    }

    li a {
      font-size: 1.5rem;
    }

    dialog::backdrop {
      /* From https://css.glass */
      background: rgba(0, 0, 0, 0.12);
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(9px);
      -webkit-backdrop-filter: blur(9px);
    }

    dialog {
      min-width: 400px;
      padding: 30px 20px;
      padding-bottom: 100px;
      color: white;
      position: relative;

      /* From https://css.glass */
      background: rgba(136, 132, 172, 0.4);
      border-radius: 16px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(16.3px);
      -webkit-backdrop-filter: blur(16.3px);
      border: 1px solid rgba(136, 132, 172, 0.59);
    }

    .dialog-email {
      padding: 15px 25px;
      background: rgba(0, 0, 0, 0.28);
      border-radius: 5px;
      display: flex;
      justify-content: space-between;
    }

    .dialog-email span {
      cursor: pointer;
      color: #ffffffcc;
    }

    [data-tooltip]:hover::after {
      display: block;
      min-width: 160px;
      position: absolute;
      content: attr(data-tooltip);
      font-size: 16px;
      color: white;
      background: rgba(136, 132, 172, 0.4);
      border-radius: 9px;
      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(16.3px);
      -webkit-backdrop-filter: blur(16.3px);
      border: 1px solid rgba(136, 132, 172, 0.59);
      padding: 20px 10px;
    }

    dialog button {
      position: absolute;
      border-radius: 5px;
      bottom: 15px;
      right: 15px;
      padding: 5px 20px;
      background: #f6f6f9;

      color: #3d3953;
    }

    @media screen and (max-width: 1080px) {
      li {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      [data-tooltip]:hover::after {
        display: none;
      }
    }
  </style>

  <script>
    const mail: NodeListOf<HTMLAnchorElement> =
      document.querySelectorAll(".Mail")!;
    const modal: HTMLDialogElement = document.querySelector("[data-modal]")!;
    const closeModal: HTMLButtonElement =
      document.querySelector("[data-close-modal]")!;

    const copyButton: HTMLSpanElement = document.getElementById("copy-button")!;

    mail.forEach((item) => {
      setTimeout(() => {
        item.addEventListener("click", () => {
          modal.showModal();
        });
      }, 500);
    });

    closeModal.addEventListener("click", () => {
      modal.close();
    });

    copyButton.addEventListener("click", () => {
      // Select the text
      const textToCopy = "edgardo.avalencia@gmail.com";

      // Copy to clipboard
      navigator.clipboard
        .writeText(textToCopy)
        .then(() => {
          copyButton.textContent = "copied!";
          copyButton.style.color = "#0C944E";
          setTimeout(() => {
            copyButton.textContent = "copy";
            copyButton.style.color = "#FFFFFFCC";
          }, 2000);
        })
        .catch((err) => {
          console.error("Failed to copy text: ", err);
        });
    });
  </script>
</header>
